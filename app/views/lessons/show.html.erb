<div class="hidden max-w-4xl mx-auto px-4 py-6 space-y-8">
 <!-- ===== Lesson header ===== -->
  <header>
    <h1 class="text-2xl md:text-3xl font-bold text-gray-900">
      <%= @lesson.title %>
    </h1>

    <p class="mt-2 text-sm text-gray-500">
      –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:
      <span class="ml-1 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium
        <%= case @progress.status
            when "completed" then "bg-green-100 text-green-800"
            when "in_progress" then "bg-blue-100 text-blue-800"
            else "bg-gray-100 text-gray-700"
        end %>">
        <%= @progress&.status&.humanize %>
      </span>
    </p>
  </header>

  <!-- ===== Status form ===== -->
  <section class="bg-white rounded-lg shadow p-4 space-y-4">
    <h2 class="font-semibold text-gray-800">–ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å</h2>

    <%= form_with url: update_status_lesson_path(@lesson),
                  method: :patch,
                  class: "flex flex-col sm:flex-row gap-3 items-start sm:items-center" do %>

      <%= select_tag :status,
            options_for_select(
              LessonProgress.statuses.keys.map { |s| [s.humanize, s] },
              @progress.status
            ),
            class: "w-full sm:w-auto border rounded px-3 py-2 text-sm" %>

      <%= submit_tag "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",
            class: "bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded text-sm" %>
    <% end %>

    <!-- Quick actions -->
    <div class="flex flex-col sm:flex-row gap-2 pt-2">
      <%= button_to "‚ñ∂ –ù–µ –Ω–∞—á–∞—Ç–æ",
            update_status_lesson_path(@lesson, status: :not_started),
            method: :patch,
            class: "w-full sm:w-auto bg-blue-100 hover:bg-blue-200 text-blue-800 px-4 py-2 rounded text-sm" %>

      <%= button_to "‚ñ∂ –í –ø—Ä–æ—Ü–µ—Å—Å–µ",
            update_status_lesson_path(@lesson, status: :in_progress),
            method: :patch,
            class: "w-full sm:w-auto bg-blue-100 hover:bg-blue-200 text-blue-800 px-4 py-2 rounded text-sm" %>

      <%= button_to "‚úì –ó–∞–≤–µ—Ä—à–µ–Ω–æ",
            update_status_lesson_path(@lesson, status: :completed),
            method: :patch,
            class: "w-full sm:w-auto bg-green-100 hover:bg-green-200 text-green-800 px-4 py-2 rounded text-sm" %>
    </div>
  </section>
  <%= link_to "Back", blocks_path(@block), class: "text-blue-600 mt-4 inline-block" %>
</div>




<div class="max-w-xl mx-auto mt-8" x-data>
  <h1 class="text-2xl font-bold text-center mb-4">
    Guess the note üéµ
  </h1>

  <div class="flex justify-center mb-4">
    <button
      class="px-4 py-2 bg-blue-600 text-white rounded"
      @click="$store.noteGuess.actions.startGame()"
    >
      Start game
    </button>
  </div>

  <div class="text-center text-3xl font-semibold mb-2">
    <p class="mb-5">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ—Ç—É</p>
    <p class="text-5xl text-blue-600" x-text="$store.noteGuess.store.$correctNoteLocalized || '‚Äî'"></p>
  </div>


  <div
    id="note-guess-notation"
    class="border rounded p-3 mb-4 bg-white"
    style="min-height: 120px"
  ></div>

  <div class="flex justify-between text-sm mb-2">
    <span class="text-green-600">
      –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
      <strong x-text="$store.noteGuess.store.$noteGuess.correct"></strong>
    </span>
    <span class="text-red-600">
      –ù–µ–≤–µ—Ä–Ω–æ:
      <strong x-text="$store.noteGuess.store.$noteGuess.incorrect"></strong>
    </span>
  </div>

  <p class="text-center text-sm mb-3">
    ‚è± –í—Ä–µ–º—è:
    <strong x-text="$store.noteGuess.store.$noteGuess.timeLeft"></strong> —Å–µ–∫
  </p>

  <div class="w-full h-3 bg-gray-200 rounded mb-4 overflow-hidden">
    <div
      class="h-3 bg-green-500 transition-all"
      :style="{
        width: (
          $store.noteGuess.store.$noteGuess.correct /
          (($store.noteGuess.store.$noteGuess.correct + $store.noteGuess.store.$noteGuess.incorrect) || 1) *
          100
        ) + '%'
      }"
    ></div>
  </div>

  <p class="text-center text-sm mb-4">
    üèÜ –õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
    <strong x-text="$store.noteGuess.store.$noteGuess.bestResult"></strong>
  </p>

  <p class="text-center font-bold mt-4" x-show="$store.noteGuess.store.$noteGuess.timeLeft <= 0">
    ‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ!
  </p>

  <div class="flex justify-center gap-3 mt-2">
    <button
      class="px-4 py-2 bg-yellow-500 text-white rounded"
      x-show="$store.noteGuess.store.$noteGuess.timeLeft <= 0"
      @click="$store.noteGuess.actions.restartGame(); $store.noteGuess.actions.startGame()"
    >
      Restart
    </button>
    <button class="cursor-pointer" @click="$store.noteGuess.actions.changeNoteLocale('ru')">RU</button>
    <button class="cursor-pointer" @click="$store.noteGuess.actions.changeNoteLocale('en')">EN</button>
  </div>
</div>
